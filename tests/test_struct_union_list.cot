// Test struct + union + list combination
struct Point {
    x: int,
    y: int,
}

fn make_point(x: int, y: int) Point {
    return Point{ .x = x, .y = y }
}

union Result {
    ok: int,
    err: int,
}

fn main() i64 {
    // Create struct from function (16 bytes - double_reg)
    var p = make_point(5, 6)
    if p.x != 5 { return 1 }

    // Union
    var result = Result.ok(42)
    var val = switch result {
        .ok |v| => v,
        .err |e| => e,
    }
    if val != 42 { return 2 }

    // List
    var list = new List<i64>()
    list.push(1)
    list.push(2)
    list.push(3)
    if list.get(0) != 1 { return 3 }
    if list.get(2) != 3 { return 4 }

    return 42
}
